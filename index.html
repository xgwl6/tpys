
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>访问 API</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
       body{
   background-image:url("bj.jpg");
   background-attachment: fixed;
   background-repeat: no-repeat;
   background-size: cover;
}

        #api-result {
            margin-top: 20px;
            font-size: 20px;
            color: #ffa500;
        }
        
        h1 {
            font-size: 28px;
            margin-top: 50px;
            text-align: center;
            color: white;
        }

        label, input, button {
            display: block;
            margin: 10px;
            width: 90%;
            max-width: 300px;
        }

        #api-url, #api-interval {
            font-size: 20px;
            padding: 10px;
        }
    </style>
</head>
<body>
    <h1>访问 API</h1>
    <label for="api-url" style="color: white;">API 地址：</label>
    <input id="api-url" type="text" placeholder="输入 API 地址">
    <label for="api-interval" style="color: white;">访问间隔（毫秒）（0为仅访问一次）：</label>
    <input id="api-interval" type="number" value="5000" min="0" placeholder="输入访问间隔">
    <button onclick="startApiRequest()">开始请求</button>
    <div id="api-result"></div>

    <script>
        function startApiRequest() {
            // 获取 API 地址和访问间隔
            const apiUrl = document.getElementById('api-url').value.trim();
            const interval = parseInt(document.getElementById('api-interval').value);

            // 确认 API 地址和访问间隔合法
            if (!apiUrl) {
                alert('请输入 API 地址');
                return;
            }
            if (isNaN(interval)) {
                alert('请输入有效的访问间隔时间');
                return;
            }
            if (interval < 0) {
                alert('访问间隔不能小于 0 毫秒');
                return;
            }

            // 访问 API 并显示返回结果
            if (interval === 0) {
                fetch(apiUrl)
                    .then(response => response.text())
                    .then(data => {
                        const resultDiv = document.getElementById('api-result');
                        resultDiv.innerHTML += `<p>${data}</p>`;
                    })
                    .catch(error => {
                        const resultDiv = document.getElementById('api-result');
                        resultDiv.innerHTML += `<p style="color: red;">请求出错：${error.message}</p>`;
                    });
            } else {
              setInterval(() => {
                  fetch(apiUrl)
                      .then(response => response.text())
                      .then(data => {
                          const resultDiv = document.getElementById('api-result');
                          resultDiv.innerHTML += `<p>${data}</p>`;
                      })
                      .catch(error => {
                          const resultDiv = document.getElementById('api-result');
                          resultDiv.innerHTML += `<p style="color: red;">请求出错：${error.message}</p>`;
                      });
              }, interval);  
            }
        }
    </script>
</body>
</html>